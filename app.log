WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
WARNING: sun.misc.Unsafe::staticFieldBase has been called by com.google.inject.internal.aop.HiddenClassDefiner (file:/Users/waltermalpartidasoto/.maven/maven-3.9.11/lib/guice-5.1.0-classes.jar)
WARNING: Please consider reporting this to the maintainers of class com.google.inject.internal.aop.HiddenClassDefiner
WARNING: sun.misc.Unsafe::staticFieldBase will be removed in a future release
[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------< com.techsolutions:gestion-ventas >------------------
[INFO] Building TechSolutions - Gestión de Ventas 1.0.0
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.2.0:run (default-cli) > test-compile @ gestion-ventas >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ gestion-ventas ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 6 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ gestion-ventas ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ gestion-ventas ---
[INFO] skip non existing resourceDirectory /Users/waltermalpartidasoto/Desktop/Walter/TechSolutions-Proyecto/src/test/resources
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ gestion-ventas ---
[INFO] No sources to compile
[INFO] 
[INFO] <<< spring-boot:3.2.0:run (default-cli) < test-compile @ gestion-ventas <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.2.0:run (default-cli) @ gestion-ventas ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.0)

2025-11-25T02:22:13.751-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] c.t.TechSolutionsApplication             : Starting TechSolutionsApplication using Java 25.0.1 with PID 34856 (/Users/waltermalpartidasoto/Desktop/Walter/TechSolutions-Proyecto/target/classes started by waltermalpartidasoto in /Users/waltermalpartidasoto/Desktop/Walter/TechSolutions-Proyecto)
2025-11-25T02:22:13.752-05:00 DEBUG 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] c.t.TechSolutionsApplication             : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-25T02:22:13.752-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] c.t.TechSolutionsApplication             : No active profile set, falling back to 1 default profile: "default"
2025-11-25T02:22:13.768-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-25T02:22:13.768-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-25T02:22:13.986-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-25T02:22:14.016-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 6 JPA repository interfaces.
WARNING: A restricted method in java.lang.System has been called
WARNING: java.lang.System::load has been called by org.apache.tomcat.jni.Library in an unnamed module (file:/Users/waltermalpartidasoto/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/10.1.16/tomcat-embed-core-10.1.16.jar)
WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module
WARNING: Restricted methods will be blocked in a future release unless native access is enabled

2025-11-25T02:22:14.220-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-25T02:22:14.224-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-25T02:22:14.224-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-25T02:22:14.239-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-25T02:22:14.239-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 471 ms
2025-11-25T02:22:14.250-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-25T02:22:14.322-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:techsolutions user=SA
2025-11-25T02:22:14.323-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-25T02:22:14.327-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:techsolutions'
2025-11-25T02:22:14.379-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-25T02:22:14.394-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final
2025-11-25T02:22:14.404-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-25T02:22:14.477-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-25T02:22:14.489-05:00  WARN 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-25T02:22:14.798-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists categorias cascade 
Hibernate: 
    drop table if exists clientes cascade 
Hibernate: 
    drop table if exists detalle_ventas cascade 
Hibernate: 
    drop table if exists productos cascade 
Hibernate: 
    drop table if exists usuario_roles cascade 
Hibernate: 
    drop table if exists usuarios cascade 
Hibernate: 
    drop table if exists ventas cascade 
Hibernate: 
    create table categorias (
        activa boolean not null,
        id bigint generated by default as identity,
        nombre varchar(100) not null unique,
        descripcion varchar(500),
        primary key (id)
    )
Hibernate: 
    create table clientes (
        fecha_registro timestamp(6),
        id bigint generated by default as identity,
        tipo_documento varchar(10),
        documento varchar(20) not null unique,
        telefono varchar(20),
        apellido varchar(100) not null,
        email varchar(100),
        nombre varchar(100) not null,
        direccion varchar(200),
        primary key (id)
    )
Hibernate: 
    create table detalle_ventas (
        cantidad integer not null,
        precio_unitario numeric(10,2) not null,
        subtotal numeric(10,2) not null,
        id bigint generated by default as identity,
        producto_id bigint not null,
        venta_id bigint not null,
        primary key (id)
    )
Hibernate: 
    create table productos (
        activo boolean not null,
        precio numeric(10,2) not null,
        stock integer not null,
        stock_minimo integer not null,
        categoria_id bigint,
        fecha_creacion timestamp(6),
        id bigint generated by default as identity,
        codigo varchar(50) not null unique,
        nombre varchar(200) not null,
        imagen_url varchar(500),
        descripcion varchar(1000),
        primary key (id)
    )
Hibernate: 
    create table usuario_roles (
        usuario_id bigint not null,
        rol varchar(255)
    )
Hibernate: 
    create table usuarios (
        activo boolean not null,
        fecha_creacion timestamp(6),
        id bigint generated by default as identity,
        ultima_sesion timestamp(6),
        username varchar(50) not null unique,
        email varchar(100) not null unique,
        nombre_completo varchar(100) not null,
        password varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table ventas (
        descuento numeric(10,2) not null,
        subtotal numeric(10,2) not null,
        total numeric(10,2) not null,
        cliente_id bigint not null,
        fecha timestamp(6) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        estado varchar(20) not null check (estado in ('PENDIENTE','PROCESANDO','COMPLETADA','CANCELADA')),
        numero_venta varchar(20) not null unique,
        estrategia_precio varchar(50),
        metodo_pago varchar(50),
        primary key (id)
    )
Hibernate: 
    alter table if exists detalle_ventas 
       add constraint FKnunx2ycrr6jfyphwmmifo6lgx 
       foreign key (producto_id) 
       references productos
Hibernate: 
    alter table if exists detalle_ventas 
       add constraint FK2dn1sdhrbmva44wbs9fy6l7mn 
       foreign key (venta_id) 
       references ventas
Hibernate: 
    alter table if exists productos 
       add constraint FK2fwq10nwymfv7fumctxt9vpgb 
       foreign key (categoria_id) 
       references categorias
Hibernate: 
    alter table if exists usuario_roles 
       add constraint FKuu9tea04xb29m2km5lwe46ua 
       foreign key (usuario_id) 
       references usuarios
Hibernate: 
    alter table if exists ventas 
       add constraint FK4dgjhccl2uuo8swmxlxb4ipb5 
       foreign key (cliente_id) 
       references clientes
Hibernate: 
    alter table if exists ventas 
       add constraint FKco9r9xjcdqtgd4nvnnolsr6ei 
       foreign key (usuario_id) 
       references usuarios
2025-11-25T02:22:14.821-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-25T02:22:14.924-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-25T02:22:15.072-05:00  WARN 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-25T02:22:15.112-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-11-25T02:22:15.171-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@245fa37c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1eea92af, org.springframework.security.web.context.SecurityContextHolderFilter@4538cd17, org.springframework.security.web.header.HeaderWriterFilter@46c9ef0e, org.springframework.web.filter.CorsFilter@2d8ea2c8, org.springframework.security.web.authentication.logout.LogoutFilter@12eb3de7, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5cf41ab4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4206b2d4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12b40906, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@645e0db8, org.springframework.security.web.access.ExceptionTranslationFilter@1bddd1be, org.springframework.security.web.access.intercept.AuthorizationFilter@56122456]
2025-11-25T02:22:15.320-05:00  WARN 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : Unable to start LiveReload server
2025-11-25T02:22:15.328-05:00  WARN 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-11-25T02:22:15.331-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists categorias cascade 
Hibernate: 
    drop table if exists clientes cascade 
Hibernate: 
    drop table if exists detalle_ventas cascade 
Hibernate: 
    drop table if exists productos cascade 
Hibernate: 
    drop table if exists usuario_roles cascade 
Hibernate: 
    drop table if exists usuarios cascade 
Hibernate: 
    drop table if exists ventas cascade 
2025-11-25T02:22:15.335-05:00  WARN 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: La base de datos ya esta cerrada (para des-habilitar el cerrado automatico durante el shutdown de la VM, agregue ";DB_CLOSE_ON_EXIT=FALSE" a la URL de conexión)
Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-11-25T02:22:15.335-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-25T02:22:15.336-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-25T02:22:15.341-05:00  INFO 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-25T02:22:15.346-05:00 ERROR 34856 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  2.405 s
[INFO] Finished at: 2025-11-25T02:22:15-05:00
[INFO] ------------------------------------------------------------------------
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             2025-11-25T02:22:12.270-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [   File Watcher] rtingClassPathChangeChangedEventListener : Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-25T02:22:23.280-05:00  WARN 28730 --- [TechSolutions GestiÃ³n de Ventas] [      Thread-12] org.apache.tomcat.util.net.Acceptor      : The acceptor thread [http-nio-8080-Acceptor] did not stop cleanly
2025-11-25T02:22:23.286-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [      Thread-12] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists categorias cascade 
Hibernate: 
    drop table if exists clientes cascade 
Hibernate: 
    drop table if exists detalle_ventas cascade 
Hibernate: 
    drop table if exists productos cascade 
Hibernate: 
    drop table if exists usuario_roles cascade 
Hibernate: 
    drop table if exists usuarios cascade 
Hibernate: 
    drop table if exists ventas cascade 
2025-11-25T02:22:23.292-05:00  WARN 28730 --- [TechSolutions GestiÃ³n de Ventas] [      Thread-12] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: La base de datos ya esta cerrada (para des-habilitar el cerrado automatico durante el shutdown de la VM, agregue ";DB_CLOSE_ON_EXIT=FALSE" a la URL de conexión)
Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-11-25T02:22:23.292-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [      Thread-12] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-25T02:22:23.293-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [      Thread-12] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.0)

2025-11-25T02:22:23.339-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] c.t.TechSolutionsApplication             : Starting TechSolutionsApplication using Java 25.0.1 with PID 28730 (/Users/waltermalpartidasoto/Desktop/Walter/TechSolutions-Proyecto/target/classes started by waltermalpartidasoto in /Users/waltermalpartidasoto/Desktop/Walter/TechSolutions-Proyecto)
2025-11-25T02:22:23.340-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] c.t.TechSolutionsApplication             : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-25T02:22:23.340-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] c.t.TechSolutionsApplication             : No active profile set, falling back to 1 default profile: "default"
2025-11-25T02:22:23.387-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-25T02:22:23.392-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 6 JPA repository interfaces.
2025-11-25T02:22:23.429-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-25T02:22:23.430-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-25T02:22:23.430-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-25T02:22:23.433-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-25T02:22:23.433-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 93 ms
2025-11-25T02:22:23.438-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-11-25T02:22:23.439-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:techsolutions user=SA
2025-11-25T02:22:23.439-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-11-25T02:22:23.439-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:techsolutions'
2025-11-25T02:22:23.451-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-25T02:22:23.452-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-25T02:22:23.453-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-25T02:22:23.453-05:00  WARN 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-25T02:22:23.487-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists categorias cascade 
Hibernate: 
    drop table if exists clientes cascade 
Hibernate: 
    drop table if exists detalle_ventas cascade 
Hibernate: 
    drop table if exists productos cascade 
Hibernate: 
    drop table if exists usuario_roles cascade 
Hibernate: 
    drop table if exists usuarios cascade 
Hibernate: 
    drop table if exists ventas cascade 
Hibernate: 
    create table categorias (
        activa boolean not null,
        id bigint generated by default as identity,
        nombre varchar(100) not null unique,
        descripcion varchar(500),
        primary key (id)
    )
Hibernate: 
    create table clientes (
        fecha_registro timestamp(6),
        id bigint generated by default as identity,
        tipo_documento varchar(10),
        documento varchar(20) not null unique,
        telefono varchar(20),
        apellido varchar(100) not null,
        email varchar(100),
        nombre varchar(100) not null,
        direccion varchar(200),
        primary key (id)
    )
Hibernate: 
    create table detalle_ventas (
        cantidad integer not null,
        precio_unitario numeric(10,2) not null,
        subtotal numeric(10,2) not null,
        id bigint generated by default as identity,
        producto_id bigint not null,
        venta_id bigint not null,
        primary key (id)
    )
Hibernate: 
    create table productos (
        activo boolean not null,
        precio numeric(10,2) not null,
        stock integer not null,
        stock_minimo integer not null,
        categoria_id bigint,
        fecha_creacion timestamp(6),
        id bigint generated by default as identity,
        codigo varchar(50) not null unique,
        nombre varchar(200) not null,
        imagen_url varchar(500),
        descripcion varchar(1000),
        primary key (id)
    )
Hibernate: 
    create table usuario_roles (
        usuario_id bigint not null,
        rol varchar(255)
    )
Hibernate: 
    create table usuarios (
        activo boolean not null,
        fecha_creacion timestamp(6),
        id bigint generated by default as identity,
        ultima_sesion timestamp(6),
        username varchar(50) not null unique,
        email varchar(100) not null unique,
        nombre_completo varchar(100) not null,
        password varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table ventas (
        descuento numeric(10,2) not null,
        subtotal numeric(10,2) not null,
        total numeric(10,2) not null,
        cliente_id bigint not null,
        fecha timestamp(6) not null,
        id bigint generated by default as identity,
        usuario_id bigint not null,
        estado varchar(20) not null check (estado in ('PENDIENTE','PROCESANDO','COMPLETADA','CANCELADA')),
        numero_venta varchar(20) not null unique,
        estrategia_precio varchar(50),
        metodo_pago varchar(50),
        primary key (id)
    )
Hibernate: 
    alter table if exists detalle_ventas 
       add constraint FKnunx2ycrr6jfyphwmmifo6lgx 
       foreign key (producto_id) 
       references productos
Hibernate: 
    alter table if exists detalle_ventas 
       add constraint FK2dn1sdhrbmva44wbs9fy6l7mn 
       foreign key (venta_id) 
       references ventas
Hibernate: 
    alter table if exists productos 
       add constraint FK2fwq10nwymfv7fumctxt9vpgb 
       foreign key (categoria_id) 
       references categorias
Hibernate: 
    alter table if exists usuario_roles 
       add constraint FKuu9tea04xb29m2km5lwe46ua 
       foreign key (usuario_id) 
       references usuarios
Hibernate: 
    alter table if exists ventas 
       add constraint FK4dgjhccl2uuo8swmxlxb4ipb5 
       foreign key (cliente_id) 
       references clientes
Hibernate: 
    alter table if exists ventas 
       add constraint FKco9r9xjcdqtgd4nvnnolsr6ei 
       foreign key (usuario_id) 
       references usuarios
2025-11-25T02:22:23.493-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-25T02:22:23.543-05:00  WARN 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-25T02:22:23.551-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-11-25T02:22:23.575-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6d9d8539, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11dcd604, org.springframework.security.web.context.SecurityContextHolderFilter@5a9c79b, org.springframework.security.web.header.HeaderWriterFilter@68890f6e, org.springframework.web.filter.CorsFilter@1a45a9e9, org.springframework.security.web.authentication.logout.LogoutFilter@484fa501, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@584f549c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5bbfe6db, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@23c3a68e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@380cf589, org.springframework.security.web.access.ExceptionTranslationFilter@13f276d, org.springframework.security.web.access.intercept.AuthorizationFilter@52ab2739]
2025-11-25T02:22:23.649-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-25T02:22:23.654-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-11-25T02:22:23.655-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] c.t.TechSolutionsApplication             : Started TechSolutionsApplication in 0.324 seconds (process running for 530.751)

================================================================================
🔐 VERIFICACIÓN DE RF3 Y RF4 - PATRÓN PROXY
================================================================================

📋 RF3: El sistema debe proteger el acceso validando credenciales y roles

📋 RF4: Solo usuarios con rol GERENTE o CONTADOR pueden acceder

🧪 TEST 1: Usuario GERENTE intentando acceder
Usuario: gerente01 - Roles: [GERENTE]

🔐 Proxy: Validando acceso a Reporte de Ventas...
✅ ACCESO AUTORIZADO: Usuario 'gerente01' con roles [GERENTE] accediendo a reporte financiero
📊 Generando reporte de ventas del 2025-10-25T02:22:23.655982 al 2025-11-25T02:22:23.655990
✅ Reporte de ventas generado exitosamente
   ✅ ACCESO PERMITIDO - Reporte generado: Reporte de Ventas

🧪 TEST 2: Usuario CONTADOR intentando acceder
Usuario: contador01 - Roles: [CONTADOR]

🔐 Proxy: Validando acceso a Reporte de Ingresos y Gastos...
✅ ACCESO AUTORIZADO: Usuario 'contador01' con roles [CONTADOR] accediendo a reporte financiero
💰 Generando reporte de ingresos y gastos para 11/2025
✅ Reporte de ingresos y gastos generado exitosamente
   ✅ ACCESO PERMITIDO - Reporte generado: Reporte de Ingresos y Gastos

🧪 TEST 3: Usuario COMPRAS intentando acceder (debe ser bloqueado)
Usuario: compras01 - Roles: [COMPRAS]

🔐 Proxy: Validando acceso a Reporte de Utilidades...
🚫 ACCESO DENEGADO: Usuario 'compras01' con roles [COMPRAS] no tiene permisos para acceder a reportes financieros
   ✅ ACCESO BLOQUEADO CORRECTAMENTE: Acceso denegado: Solo usuarios con rol de GERENTE o CONTADOR pueden acceder a reportes financieros. Sus roles actuales: [COMPRAS]

🧪 TEST 4: Usuario inactivo intentando acceder (debe ser bloqueado)
Usuario: inactivo01 - Activo: false

🔐 Proxy: Validando acceso a Reporte de Ventas...
🚫 ACCESO DENEGADO: Usuario inactivo
   ✅ ACCESO BLOQUEADO CORRECTAMENTE: Acceso denegado: Usuario inactivo

🧪 TEST 5: Usuario no autenticado intentando acceder (debe ser bloqueado)

🔐 Proxy: Validando acceso a Reporte de Ventas...
🚫 ACCESO DENEGADO: Usuario no autenticado
   ✅ ACCESO BLOQUEADO CORRECTAMENTE: Acceso denegado: Usuario no autenticado

✅ RF3 VERIFICADO: El Proxy valida credenciales correctamente
✅ RF4 VERIFICADO: Solo GERENTE y CONTADOR tienen acceso a reportes

================================================================================
✅ VERIFICACIÓN COMPLETADA - CONTROL DE ACCESO FUNCIONA CORRECTAMENTE
================================================================================


================================================================================
📢 CONFIGURACIÓN DEL PATRÓN OBSERVER - GESTIÓN DE INVENTARIO
================================================================================

📋 RF5: Sistema envía notificaciones cuando stock cae por debajo del mínimo
📋 Solo usuarios con rol GERENTE y COMPRAS reciben notificaciones

🔔 Registrando observadores:
Observador agregado: GERENTE
Observador agregado: COMPRAS
Observador agregado: VENTAS

✅ Total de observadores registrados: 3
✅ Observadores activos para notificaciones de stock bajo:
   • GERENTE: Juan Pérez - Gerente
   • COMPRAS: María González - Jefe de Compras
   ⚠️  VENTAS: No recibirá notificaciones (rol no autorizado)

💡 Las notificaciones se enviarán automáticamente cuando:
   • El stock de un producto caiga por debajo del stock mínimo
   • Se configure un nuevo stock mínimo mayor al stock actual
   • Se realice una venta que reduzca el stock al nivel crítico

🌐 Endpoints disponibles:
   • POST /api/inventario/{id}/reducir - Reduce stock
   • POST /api/inventario/{id}/aumentar - Aumenta stock
   • PUT /api/inventario/{id}/stock-minimo - Configura stock mínimo
   • GET /api/inventario/{id} - Consulta estado

================================================================================
✅ PATRÓN OBSERVER CONFIGURADO - LISTO PARA NOTIFICAR
================================================================================

Hibernate: 
    select
        count(*) 
    from
        productos p1_0

📦 Inicializando datos de prueba...

Hibernate: 
    insert 
    into
        categorias
        (activa, descripcion, nombre, id) 
    values
        (?, ?, ?, default)
Hibernate: 
    insert 
    into
        categorias
        (activa, descripcion, nombre, id) 
    values
        (?, ?, ?, default)
Hibernate: 
    insert 
    into
        productos
        (activo, categoria_id, codigo, descripcion, fecha_creacion, imagen_url, nombre, precio, stock, stock_minimo, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        productos
        (activo, categoria_id, codigo, descripcion, fecha_creacion, imagen_url, nombre, precio, stock, stock_minimo, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        productos
        (activo, categoria_id, codigo, descripcion, fecha_creacion, imagen_url, nombre, precio, stock, stock_minimo, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        productos
        (activo, categoria_id, codigo, descripcion, fecha_creacion, imagen_url, nombre, precio, stock, stock_minimo, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        productos
        (activo, categoria_id, codigo, descripcion, fecha_creacion, imagen_url, nombre, precio, stock, stock_minimo, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
✅ Datos de prueba inicializados:
   • Laptop HP ProBook (Stock: 25, Mínimo: 10)
   • Mouse Inalámbrico Logitech (Stock: 8, Mínimo: 15) ⚠️ BAJO STOCK
   • Teclado Mecánico RGB (Stock: 12, Mínimo: 8)
   • Cuadernos A4 (Pack 10) (Stock: 50, Mínimo: 20)
   • Lápices (Caja 24) (Stock: 5, Mínimo: 10) ⚠️ BAJO STOCK


================================================================================
🔍 VERIFICACIÓN DE RF1 Y RF2 - PATRÓN ADAPTER
================================================================================

📋 RF1: El sistema debe integrar múltiples pasarelas mediante adaptador común

✅ Pasarelas integradas: 3
   • Yape (ID: yape, Estado: ✓ Habilitada)
   • Plin (ID: plin, Estado: ✓ Habilitada)
   • PayPal (ID: paypal, Estado: ✓ Habilitada)

📤 Probando procesamiento de pagos:

Procesando pago con PayPal...
Monto: 100.00
Referencia: TEST-001
   ✅ PayPal: Pago procesado exitosamente
Procesando pago con Yape...
Monto: S/ 50.00
Referencia: TEST-002
   ✅ Yape: Pago procesado exitosamente
Procesando pago con Plin...
Monto: S/ 75.50
Referencia: TEST-003
   ✅ Plin: Pago procesado exitosamente

✅ RF1 VERIFICADO: Todas las pasarelas funcionan con interfaz común

📋 RF2: El administrador puede habilitar/deshabilitar pasarelas

🔧 Deshabilitando pasarela Yape...
   • Yape: ✓ Deshabilitada correctamente

🚫 Intentando procesar pago con pasarela deshabilitada:
   ✅ Bloqueado correctamente: La pasarela yape no está habilitada

🔧 Habilitando nuevamente Yape...
   • Yape: ✓ Habilitada correctamente

✔️ Verificando que Yape ahora funciona:
Procesando pago con Yape...
Monto: S/ 30.00
Referencia: TEST-005
   ✅ Yape: Pago procesado exitosamente

✅ RF2 VERIFICADO: Control de habilitación funciona correctamente

================================================================================
✅ VERIFICACIÓN COMPLETADA - TODOS LOS REQUISITOS FUNCIONAN CORRECTAMENTE
================================================================================

2025-11-25T02:22:23.664-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [  restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2025-11-25T02:23:50.071-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-25T02:23:50.071-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-25T02:23:50.072-05:00  INFO 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-25T02:23:50.072-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /
2025-11-25T02:23:50.072-05:00  WARN 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-25T02:23:50.072-05:00  WARN 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-25T02:23:50.072-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /
2025-11-25T02:23:50.087-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T02:23:59.645-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /
2025-11-25T02:23:59.651-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /
2025-11-25T02:23:59.658-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T02:23:59.667-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /css/styles.css
2025-11-25T02:23:59.671-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /css/styles.css
2025-11-25T02:23:59.673-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /js/main.js
2025-11-25T02:23:59.677-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T02:23:59.697-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /js/main.js
2025-11-25T02:23:59.699-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T02:26:32.617-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /
2025-11-25T02:26:32.648-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /
2025-11-25T02:26:32.670-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T02:26:32.677-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /css/styles.css
2025-11-25T02:26:32.677-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /js/main.js
2025-11-25T02:26:32.679-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [io-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /js/main.js
2025-11-25T02:26:32.679-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /css/styles.css
2025-11-25T02:26:32.680-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T02:26:32.681-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T02:26:32.877-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /
2025-11-25T02:26:32.878-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /
2025-11-25T02:26:32.880-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T02:26:32.886-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /js/main.js
2025-11-25T02:26:32.886-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /css/styles.css
2025-11-25T02:26:32.886-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /js/main.js
2025-11-25T02:26:32.887-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /css/styles.css
2025-11-25T02:26:32.887-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T02:26:32.887-05:00 DEBUG 28730 --- [TechSolutions GestiÃ³n de Ventas] [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
