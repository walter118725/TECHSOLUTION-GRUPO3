<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Procesar Pago - TechSolutions</title>
    <link rel="stylesheet" href="/css/styles.css?v=1.0.1" />
    <meta name="description" content="Selecciona tu pasarela (PayPal, Yape, Plin) y confirma el pago de tu carrito." />
</head>
<body>
    <div class="pago-container">
        <div class="pago-header">
            <h1>ğŸ’³ Pago Seguro</h1>
            <p>Elige tu mÃ©todo de pago y confirma la transacciÃ³n</p>
        </div>

        <div class="pago-content">
            <div class="pago-grid">
                <!-- Formulario de Pago -->
                <div class="pago-card" style="animation: slideInUp 0.5s ease;">
                    <h3>ğŸ“ Datos del Pago</h3>
                    <form id="pagoForm" class="auth-form" onsubmit="return false;">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" id="csrfToken" />

                        <div class="form-field">
                            <label for="monto">Monto (S/.)</label>
                            <input id="monto" name="monto" type="number" min="1" step="0.01" placeholder="Ej: 199.90" required />
                            <small class="field-hint">Ingresa el total a pagar.</small>
                        </div>

                        <div class="form-field">
                            <label for="referencia">Referencia de pago</label>
                            <input id="referencia" name="referencia" type="text" placeholder="Ej: ORDEN-12345" required />
                            <small class="field-hint">Usaremos esta referencia para verificar el estado.</small>
                        </div>

                        <div class="form-field">
                            <label for="pasarela">MÃ©todo de pago</label>
                            <select id="pasarela" name="pasarela" required>
                                <option value="paypal">ğŸ’³ PayPal</option>
                                <option value="yape">ğŸ“± Yape</option>
                                <option value="plin">ğŸ“² Plin</option>
                            </select>
                        </div>

                        <button id="btnProcesar" class="btn btn-primary auth-submit">âœ… Confirmar Pago</button>
                    </form>

                    <div id="resultado" class="alert" style="display:none; margin-top: 16px;"></div>
                </div>

                <!-- Estado de Pasarelas -->
                <div class="pago-card" style="animation: slideInUp 0.6s ease;">
                    <h3>ğŸ”Œ Estado de Pasarelas</h3>
                    <div id="estadoPasarelas" style="margin-top: 12px;">
                        <div class="pasarela-item">
                            <span class="pasarela-name">ğŸ’³ PayPal</span>
                            <span class="badge badge-success">Activo</span>
                        </div>
                        <div class="pasarela-item">
                            <span class="pasarela-name">ğŸ“± Yape</span>
                            <span class="badge badge-success">Activo</span>
                        </div>
                        <div class="pasarela-item">
                            <span class="pasarela-name">ğŸ“² Plin</span>
                            <span class="badge badge-success">Activo</span>
                        </div>
                    </div>
                    <button id="btnRefrescarEstado" class="btn btn-secondary" style="margin-top: 16px; width: 100%;">ğŸ”„ Refrescar Estado</button>
                </div>
            </div>

            <div style="margin-top: 32px; text-align: center;">
                <a href="/carrito" class="btn-back">â¬…ï¸ Volver al Carrito</a>
                <a href="/dashboard" class="btn-back" style="margin-left: 12px;">ğŸ  Dashboard</a>
            </div>
        </div>
    </div>

    <script src="/js/pago.js?v=1.0.1"></script>
</body>
</html>
