<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Iniciar sesiÃ³n â€¢ TechSolutions</title>
    <link rel="stylesheet" href="/css/styles.css?v=1.0.0" />
    <meta name="description" content="Accede a tu cuenta para gestionar compras, inventario y reportes en TechSolutions." />
</head>
<body>
    <div class="auth-wrapper">
        <div class="auth-card" id="authCard">
            <div class="auth-logo">ğŸ’¼ TechSolutions</div>
            <h1 class="auth-title">Bienvenido de vuelta</h1>
            <p class="auth-subtitle">Ingresa tus credenciales para continuar</p>

            <!-- Mensajes de estado -->
            <div th:if="${param.error}" class="alert alert-danger" style="margin-bottom:12px;">
                <span>âŒ</span> Usuario o contraseÃ±a incorrectos
            </div>
            <div th:if="${param.logout}" class="alert alert-success" style="margin-bottom:12px;">
                <span>âœ…</span> Has cerrado sesiÃ³n correctamente
            </div>

            <form class="auth-form" action="/login" method="post" id="loginForm">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                <div class="form-field">
                    <label for="username">Usuario</label>
                    <input id="username" name="username" type="text" placeholder="Ej: admin" required autofocus autocomplete="username" />
                    <small class="field-hint">Usa una de las cuentas de prueba si no tienes una.</small>
                </div>

                <div class="form-field">
                    <label for="password">ContraseÃ±a</label>
                    <div class="password-wrapper">
                        <input id="password" name="password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required autocomplete="current-password" />
                        <button type="button" class="toggle-password" onclick="togglePassword()">ğŸ‘ï¸</button>
                    </div>
                    <small class="field-hint">MÃ­nimo 6 caracteres.</small>
                </div>

                <button type="submit" class="btn btn-primary auth-submit">Ingresar</button>
            </form>

            <div class="auth-footer">
                <div class="mini-title">Cuentas de prueba</div>
                <ul class="accounts-list">
                    <li><span class="role-tag tag-admin">ADMIN</span> admin / admin123</li>
                    <li><span class="role-tag tag-gerente">GERENTE</span> gerente / gerente123</li>
                    <li><span class="role-tag tag-cliente">CLIENTE</span> cliente / cliente123</li>
                </ul>
                <div class="login-note">Â¿Olvidaste tu contraseÃ±a? <a href="#" class="link-help">ContÃ¡ctanos</a></div>
            </div>
        </div>
    </div>

    <script>
    function togglePassword() {
        const pwd = document.getElementById('password');
        const btn = document.querySelector('.toggle-password');
        if (pwd.type === 'password') {
            pwd.type = 'text';
            btn.textContent = 'ğŸ™ˆ';
        } else {
            pwd.type = 'password';
            btn.textContent = 'ğŸ‘ï¸';
        }
    }

    (function(){
        const form = document.getElementById('loginForm');
        const card = document.getElementById('authCard');
        form?.addEventListener('submit', function(e){
            const u = document.getElementById('username');
            const p = document.getElementById('password');
            let ok = true;
            if(!u.value.trim()) { u.classList.add('field-error'); ok = false; }
            else { u.classList.remove('field-error'); }
            if(!p.value.trim()) { p.classList.add('field-error'); ok = false; }
            else { p.classList.remove('field-error'); }
            if(!ok){
                e.preventDefault();
                card.classList.add('form-shake');
                setTimeout(()=> card.classList.remove('form-shake'), 600);
            }
        });
    })();
    </script>
</body>
</html>